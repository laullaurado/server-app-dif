{
  "manifest": {
    "name": "connect-pg-simple",
    "version": "9.0.0",
    "description": "A simple, minimal PostgreSQL session store for Connect/Express",
    "url": "http://github.com/voxpelli/node-connect-pg-simple",
    "repository": {
      "type": "git",
      "url": "git://github.com/voxpelli/node-connect-pg-simple.git"
    },
    "author": {
      "name": "Pelle Wessman",
      "email": "pelle@kodfabrik.se",
      "url": "http://kodfabrik.se/"
    },
    "license": "MIT",
    "dependencies": {
      "@types/pg": "^8.10.2",
      "pg": "^8.8.0"
    },
    "engines": {
      "node": ">=16.0.0"
    },
    "main": "index.js",
    "files": [
      "index.js",
      "table.sql"
    ],
    "scripts": {
      "check:installed-check": "installed-check -i eslint-plugin-jsdoc -i knip",
      "check:knip": "knip",
      "check:lint": "eslint --report-unused-disable-directives .",
      "check:tsc": "tsc",
      "check:type-coverage": "type-coverage --detail --strict --at-least 85 --ignore-files 'test/**/*'",
      "check": "run-p check:*",
      "light:mocha": "c8 --reporter=lcov --reporter text mocha test/*.spec.js",
      "prepare": "husky install",
      "test-light": "run-s check light:*",
      "test:mocha": "c8 --reporter=lcov --reporter text mocha 'test/**/*.spec.js' --exit",
      "test-ci": "run-s test:*",
      "test": "run-s check test:*"
    },
    "devDependencies": {
      "@types/chai": "^4.3.5",
      "@types/chai-as-promised": "^7.1.5",
      "@types/cookie-signature": "^1.1.0",
      "@types/express": "^4.17.17",
      "@types/express-session": "^1.17.7",
      "@types/mocha": "^10.0.1",
      "@types/node": "^16.18.34",
      "@types/proxyquire": "^1.3.28",
      "@types/sinon": "^10.0.15",
      "@types/sinon-chai": "^3.2.9",
      "@types/supertest": "^2.0.12",
      "@voxpelli/eslint-config": "^18.0.0",
      "@voxpelli/tsconfig": "^8.0.0",
      "c8": "^7.14.0",
      "chai": "^4.3.7",
      "chai-as-promised": "^7.1.1",
      "cookie-signature": "^1.2.1",
      "cookiejar": "^2.1.4",
      "dotenv": "^16.1.4",
      "eslint": "^8.42.0",
      "eslint-plugin-es-x": "^7.1.0",
      "eslint-plugin-import": "^2.27.5",
      "eslint-plugin-jsdoc": "^46.2.6",
      "eslint-plugin-mocha": "^10.1.0",
      "eslint-plugin-n": "^16.0.0",
      "eslint-plugin-promise": "^6.1.1",
      "eslint-plugin-security": "^1.7.1",
      "eslint-plugin-sort-destructure-keys": "^1.5.0",
      "eslint-plugin-unicorn": "^47.0.0",
      "express": "^4.18.2",
      "express-session": "^1.17.3",
      "husky": "^8.0.3",
      "installed-check": "^7.1.1",
      "knip": "^2.13.0",
      "mocha": "^10.2.0",
      "npm-run-all2": "^6.0.5",
      "pg-promise": "^11.4.3",
      "proxyquire": "^2.1.3",
      "sinon": "^15.1.0",
      "sinon-chai": "^3.7.0",
      "supertest": "^6.3.3",
      "type-coverage": "^2.26.0",
      "typescript": "~5.1.3"
    },
    "_registry": "npm",
    "_loc": "/home/ubuntu/.cache/yarn/v6/npm-connect-pg-simple-9.0.0-integrity/node_modules/connect-pg-simple/package.json",
    "readmeFilename": "README.md",
    "readme": "# Connect PG Simple\n\nA simple, minimal PostgreSQL session store for Express/Connect\n\n[![npm version](https://img.shields.io/npm/v/connect-pg-simple.svg?style=flat)](https://www.npmjs.com/package/connect-pg-simple)\n[![npm downloads](https://img.shields.io/npm/dm/connect-pg-simple.svg?style=flat)](https://www.npmjs.com/package/connect-pg-simple)\n[![Module type: CJS](https://img.shields.io/badge/module%20type-cjs-brightgreen)](https://github.com/voxpelli/badges-cjs-esm)\n[![js-semistandard-style](https://img.shields.io/badge/code%20style-semistandard-brightgreen.svg)](https://github.com/voxpelli/eslint-config)\n[![Follow @voxpelli@mastodon.social](https://img.shields.io/mastodon/follow/109247025527949675?domain=https%3A%2F%2Fmastodon.social&style=social)](https://mastodon.social/@voxpelli)\n\n## Installation\n\n```bash\nnpm install connect-pg-simple\n```\n\n**Once npm installed the module, you need to create the _\"session\"_ table in your database.**\n\nFor that you can use the [table.sql](table.sql) file provided with the module:\n\n```bash\npsql mydatabase < node_modules/connect-pg-simple/table.sql\n```\n\nOr simply play the file via a GUI, like the pgAdminIII queries tool.\n\nOr instruct this module to create it itself, by setting the `createTableIfMissing` option.\n\nNote that `connect-pg-simple` requires PostgreSQL version 9.5 or above.\n\n## Usage\n\nExamples are based on Express 4.\n\nSimple example:\n\n```javascript\nconst session = require('express-session');\n\napp.use(session({\n  store: new (require('connect-pg-simple')(session))({\n    // Insert connect-pg-simple options here\n  }),\n  secret: process.env.FOO_COOKIE_SECRET,\n  resave: false,\n  cookie: { maxAge: 30 * 24 * 60 * 60 * 1000 } // 30 days\n  // Insert express-session options here\n}));\n```\n\nAdvanced example showing some custom options:\n\n```javascript\nconst pg = require('pg');\nconst expressSession = require('express-session');\nconst pgSession = require('connect-pg-simple')(expressSession);\n\nconst pgPool = new pg.Pool({\n    // Insert pool options here\n});\n\napp.use(expressSession({\n  store: new pgSession({\n    pool : pgPool,                // Connection pool\n    tableName : 'user_sessions'   // Use another table-name than the default \"session\" one\n    // Insert connect-pg-simple options here\n  }),\n  secret: process.env.FOO_COOKIE_SECRET,\n  resave: false,\n  cookie: { maxAge: 30 * 24 * 60 * 60 * 1000 } // 30 days\n  // Insert express-session options here\n}));\n```\n\n## Advanced options\n\n\n### Connection options\n\nListed in the order they will be picked up. If multiple are defined, then the first in the lists that is defined will be used, the rest ignored.\n\n* **pool** - _The recommended one_ – Connection pool object (compatible with [pg.Pool](https://github.com/brianc/node-pg-pool)) for the underlying database module.\n* **pgPromise** - Database object from `pg-promise` to be used for DB communications.\n* **conObject** - If you don't specify a pool object, use this option or `conString` to specify a [PostgreSQL Pool connection object](https://node-postgres.com/api/client#constructor) and this module will create a new pool for you.\n* **conString** - If you don't specify a pool object, use this option or `conObject` to specify a PostgreSQL connection string like `postgres://user:password@host:5432/database` and this module will create a new pool for you. If there's a connection string in the `DATABASE_URL` environment variable (as it is by default on eg. Heroku) then this module will fallback to that if no other connection method has been specified.\n\n### Other options\n\n* **ttl** - the time to live for the session in the database – specified in seconds. Defaults to the cookie maxAge if the cookie has a maxAge defined and otherwise defaults to one day.\n* **createTableIfMissing** - if set to `true` then creates the table in the case where the table does not already exist. Defaults to `false`.\n* **disableTouch** – boolean value that if set to `true` disables the updating of TTL in the database when using touch. Defaults to false.\n* **schemaName** - if your session table is in another Postgres schema than the default (it normally isn't), then you can specify that here.\n* **tableName** - if your session table is named something else than `session`, then you can specify that here.\n* **pruneSessionInterval** - sets the delay in seconds at which expired sessions are pruned from the database. Default is `60` seconds. If set to `false` no automatic pruning will happen. By default every delay is randomized between 50% and 150% of set value, resulting in an average delay equal to the set value, but spread out to even the load on the database. Automatic pruning will happen `pruneSessionInterval` seconds after the last pruning (includes manual prunes).\n* **pruneSessionRandomizedInterval** – if set to `false`, then the exact value of `pruneSessionInterval` will be used in all delays. No randomization will happen. If multiple instances all start at once, disabling randomization can mean that multiple instances are all triggering pruning at once, causing unnecessary load on the database. Can also be set to a method, taking a numeric `delay` parameter and returning a modified one, thus allowing a custom delay algorithm if wanted.\n* **errorLog** – the method used to log errors in those cases where an error can't be returned to a callback. Defaults to `console.error()`, but can be useful to override if one eg. uses [Bunyan](https://github.com/trentm/node-bunyan) for logging.\n\n## Useful methods\n\n* **close()** – if this module used its own database module to connect to Postgres, then this will shut that connection down to allow a graceful shutdown. Returns a `Promise` that will resolve when the database has shut down.\n* **pruneSessions([callback(err)])** – will prune old sessions. Only really needed to be called if **pruneSessionInterval** has been set to `false` – which can be useful if one wants improved control of the pruning.\n\n## For enterprise\n\nAvailable as part of the Tidelift Subscription.\n\nThe maintainers of connect-pg-simple and thousands of other packages are working with Tidelift to deliver commercial support and maintenance for the open source packages you use to build your applications. Save time, reduce risk, and improve code health, while paying the maintainers of the exact packages you use. [Learn more.](https://tidelift.com/subscription/pkg/npm-connect-pg-simple?utm_source=npm-connect-pg-simple&utm_medium=referral&utm_campaign=enterprise&utm_term=repo)\n",
    "licenseText": "The MIT License (MIT)\n\nCopyright (c) 2016 Pelle Wessman\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.npmjs.org/connect-pg-simple/-/connect-pg-simple-9.0.0.tgz",
    "type": "tarball",
    "reference": "https://registry.npmjs.org/connect-pg-simple/-/connect-pg-simple-9.0.0.tgz",
    "hash": "",
    "integrity": "sha512-tPHR01VQU/qnOl8bMsORD1WyrNkbVkyNmnXfXqaH4NZfxWb3zQkCTPbVHjkhjFpKCQpHA+Ry9Y7medndwyvq6A==",
    "registry": "npm",
    "packageName": "connect-pg-simple",
    "cacheIntegrity": "sha512-tPHR01VQU/qnOl8bMsORD1WyrNkbVkyNmnXfXqaH4NZfxWb3zQkCTPbVHjkhjFpKCQpHA+Ry9Y7medndwyvq6A== sha1-sJOJyQXeylp+9iIKuM1IIMwItvs="
  },
  "registry": "npm",
  "hash": "b4f1d1d3555053faa73a5f1b32c3910f55b2acd91b564c8d9a75df5ea687e0d65fc566f7cd09024cf6d51e39218c5a4a090a4703e472f58ee679d9ddc32beae8"
}